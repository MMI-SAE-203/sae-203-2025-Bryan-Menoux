---
import logoBlanc from "../assets/logo_blanc.svg";
import logoNoir from "../assets/logo_noir.svg";
---

<header
  class="fixed inset-x-0 top-0 lg:py-0 lg:bg-white lg:flex lg:justify-between z-20"
>
  <div class="px-4
  flex
  items-center
  justify-between">
    <a href="/"
      ><img
        src={logoBlanc.src}
        alt="logo cinenature"
        class="h-16 block lg:hidden"
      /><img
        src={logoNoir.src}
        alt="logo cinenature"
        class="h-18 hidden lg:block"
      /></a
    >
    <button
      class="group relative z-20 flex h-6 w-8 flex-col justify-between *:h-[2px] *:w-full *:bg-white *:transition-all *:duration-300 *:ease lg:hidden lg:*:hidden"
      id="menu-btn"
      aria-label="Menu"
      aria-controls="menu"
      aria-expanded="false"
    >
      <span
        class="group-aria-expanded:translate-y-[11px] group-aria-expanded:rotate-45"
      ></span>
      <span class="group-aria-expanded:opacity-0"></span>
      <span
        class="group-aria-expanded:-translate-y-[11px] group-aria-expanded:-rotate-45"
      ></span>
    </button>
  </div>
  <nav
    class="visible fixed z-10 inset-0 text-2xl text-white opacity-100 transition-all duration-300 ease-in-out max-lg:aria-hidden:invisible max-lg:aria-hidden:opacity-0 lg:relative lg:flex lg:items-center lg:bg-transparent lg:text-sm lg:font-bold lg:uppercase lg:tracking-wide bg-(--color-green) lg:text-black lg:opacity-100 lg:whitespace-nowrap"
    id="menu"
    aria-hidden="true"
  >
    <ul
      class="mt-[25vh] px-8 lg:m-0 lg:flex *:relative *:overflow-hidden *:lg:before:absolute *:lg:before:bottom-0 *:lg:before:left-0 *:lg:before:h-2 *:lg:before:w-full *:lg:before:translate-y-2 *:lg:before:bg-black *:lg:before:transition-all *:lg:before:duration-300 *:lg:before:ease-in-out *:lg:hover:before:translate-y-0"
    >
      <li>
        <a class="block px-5 py-4" href="/programme">Programme</a>
      </li>
      <li>
        <a class="block px-5 py-4" href="/billeterie">Billeterie</a>
      </li>
      <li>
        <a class="block px-5 py-4" href="/infos-pratiques"
          >Lieu & Infos Pratiques</a
        >
      </li>
      <li>
        <a class="block px-5 py-4" href="/eco-responsabilite"
          >Éco-Responsabilité</a
        >
      </li>
      <li>
        <a class="block px-5 py-4" href="/contact">Contact</a>
      </li>
      <li>
        <a class="block px-5 py-4" href="/a-propos">À Propos</a>
      </li>
    </ul>
  </nav>
</header>
<script>
  const toggle = document.querySelector("#menu-btn");
  const nav = document.querySelector("#menu");
  const page = document.body;

  if (toggle && nav) {
    toggle.addEventListener("click", () => {
      const isOpen = toggle.ariaExpanded === "true";
      const isClosed = !isOpen;
      toggle.ariaExpanded = String(isClosed);
      nav.ariaHidden = String(isOpen);
      page.classList.toggle("noscroll", isClosed);
    });
  }

  const hero = document.querySelector(".hero");
  console.log(hero?.clientHeight);
  window.addEventListener("scroll", () => {
    if (hero?.clientHeight) {
      if (window.scrollY > hero.clientHeight) {
        document
          .querySelector("header")
          ?.classList.add("bg-[var(--color-green)]");
      } else {
        document
          .querySelector("header")
          ?.classList.remove("bg-[var(--color-green)]");
      }
    }
  });
</script>
